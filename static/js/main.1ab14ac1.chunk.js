(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{33:function(e,t,a){e.exports=a(48)},47:function(e,t,a){},48:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(20),s=a.n(r),c=a(11),l=a(12),i=a(14),m=a(13),p=a(15),d=a(3),h=a(9),u=a(10),f=a(30),k=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.pokemon,t="",a="/pokemon/"+this.props.searchTerm+"/"+e.id;return this.props.isSelectedCard&&(t=" selected",a="/"),o.a.createElement("div",{className:"col-4"+t},o.a.createElement(f.a,{to:a,className:"card mb-2"},o.a.createElement("div",{className:"image"},o.a.createElement("img",{src:e.sprites.front_default,alt:e.name}),o.a.createElement("div",{className:"poke-id"},"ID / ",e.id)),o.a.createElement("div",{className:"info"},o.a.createElement("h3",null,e.name),o.a.createElement("div",{className:"types"},e.types.map(function(e){return o.a.createElement("div",{key:e.slot,className:"type"},e.type.name)})),e.evolves_from_species&&o.a.createElement("div",{className:"evolution-from"},"Evoluciona de:",o.a.createElement("span",null,e.evolves_from_species)))))}}]),t}(n.Component);var v=function(e){return e.pokemons?o.a.createElement("div",{className:"row mt-2"+(e.selectedCard?" selected-pokemon":"")},e.pokemons.map(function(t){return o.a.createElement(k,{key:t.id,pokemon:t,isSelectedCard:e.selectedCard===t.id,searchTerm:e.searchTerm})})):null},E={SELECT_CARD:"pokemons_select_card",SEARCH:"pokemons_search",SET_LIST:"pokemons_set_list",LOADING_DATA:"pokemons_loading_data",SET_NAME_LIST:"pokemons_set_name_list",LOADING_NAMES_DATA:"pokemons_loading_names_data",SET_ROUTE_MATCH:"pokemons_set_route_match"},g=function(e){if(e.status<300)return e;var t=new Error(e.status);throw t.response=e,t},T=function(e){return e.json()},_={getPokemonNames:function(){return fetch("https://pokeapi.co/api/v2/pokemon?offset=0&limit=1000",{method:"get"}).then(g).then(T)},getPokemonData:function(e){return fetch(e,{method:"get"}).then(g).then(T)},getEvolvesFrom:function(e){return fetch(e,{method:"get"}).then(g).then(T)}},y={selectCard:function(e){return{type:E.SELECT_CARD,payload:{pokemonId:e}}},loadPokemonNames:function(){return function(e,t){t().pokemons.loadingNamesData||(e({type:E.LOADING_NAMES_DATA,payload:{loading:!0}}),_.getPokemonNames().then(function(a){e({type:E.SET_NAME_LIST,payload:{list:a.results}}),e({type:E.LOADING_NAMES_DATA,payload:{loading:!1}}),window.localStorage.setItem("pokemonNames",JSON.stringify(a.results)),t().pokemons.searchTerm.length>0&&y.search(t().pokemons.searchTerm)(e,t)}))}},search:function(e){return function(t,a){var n;t({type:E.LOADING_DATA,payload:{loading:!0}}),e=e.toLowerCase(),t({type:E.SEARCH,payload:{value:e}}),n=e.length>0?a().pokemons.pokemonNames.filter(function(t){return!!t.name.match(e)}):[],y.loadPokemons(n.slice(0,9))(t,a)}},loadPokemons:function(e){return function(t,a){var n=0;0===e.length&&y.showSearch()(t,a),e.forEach(function(o){try{var r=JSON.parse(window.localStorage.getItem(o.url));if(r&&r.id)return void(++n===e.length&&y.showSearch()(t,a))}catch(s){}_.getPokemonData(o.url).then(function(r){_.getEvolvesFrom(r.species.url).then(function(s){var c={id:r.id,name:r.name,sprites:r.sprites,types:r.types,evolves_from_species:s.evolves_from_species?s.evolves_from_species.name:null};window.localStorage.setItem(o.url,JSON.stringify(c)),++n===e.length&&y.showSearch()(t,a)})})})}},showSearch:function(){return function(e,t){var a=t().pokemons.searchTerm,n=[],o=!0;if(a.length>0){(n=(n=t().pokemons.pokemonNames.filter(function(e){return!!e.name.match(a)}).slice(0,9).map(function(e){var t=JSON.parse(window.localStorage.getItem(e.url));return t&&t.id?t:null})).filter(function(e){return null!=e}))||(n=[]);var r=t().pokemons.selectedCard;r>0&&0===n.filter(function(e){return e.id===r}).length&&(o=!1)}e(y.setRouteMatch(o)),e({type:E.SET_LIST,payload:{list:n}}),e({type:E.LOADING_DATA,payload:{loading:!1}})}},setRouteMatch:function(e){return{type:E.SET_ROUTE_MATCH,payload:{routeMatch:e}}}},N=y;var S=function(){return o.a.createElement("div",{className:"col-12"},o.a.createElement("div",{className:"loading"},o.a.createElement("div",null),o.a.createElement("div",null),o.a.createElement("div",null)))},O=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).search=a.search.bind(Object(h.a)(a)),a.checkPathSearchTerm=a.checkPathSearchTerm.bind(Object(h.a)(a)),a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){this.checkPathSearchTerm()}},{key:"componentDidUpdate",value:function(e,t,a){this.checkPathSearchTerm()}},{key:"checkPathSearchTerm",value:function(){this.props.match.params.searchTerm&&this.props.searchTerm!==this.props.match.params.searchTerm&&this.props.search(this.props.match.params.searchTerm)}},{key:"search",value:function(e){this.props.search(e.target.value),this.props.selectCard(0)}},{key:"render",value:function(){return o.a.createElement("div",{className:"row mt-1"},o.a.createElement("div",{className:"search-box col-12"},o.a.createElement("input",{type:"text",name:"search-pokemon",placeholder:"Filtra pokemons por nombre...",value:this.props.searchTerm,onChange:this.search})))}}]),t}(n.Component),b={search:N.search,selectCard:N.selectCard},C=Object(d.f)(Object(u.c)(function(e){return{searchTerm:e.pokemons.searchTerm}},b)(O)),A=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).loadSelectedCard=a.loadSelectedCard.bind(Object(h.a)(a)),a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){this.loadSelectedCard()}},{key:"componentDidUpdate",value:function(e,t,a){this.loadSelectedCard()}},{key:"loadSelectedCard",value:function(){if(0!==this.props.pokemonNames.length)if(this.props.match.params.id){var e=parseInt(this.props.match.params.id,10);e>0?0===this.props.selectedCard?this.props.selectCard(e):this.props.routeMatch||(this.props.selectCard(0),this.props.history.push("/")):this.props.history.push("/")}else this.props.selectedCard>0&&this.props.selectCard(0);else this.props.loadPokemonNames()}},{key:"render",value:function(){return this.props.loadingData||this.props.loadingNamesData?o.a.createElement("div",null,o.a.createElement(C,null),o.a.createElement(S,null)):o.a.createElement("div",null,o.a.createElement(C,null),o.a.createElement(v,{pokemons:this.props.pokemons,selectedCard:this.props.selectedCard,searchTerm:this.props.searchTerm}))}}]),t}(n.Component),j={selectCard:N.selectCard,loadPokemonNames:N.loadPokemonNames},w=Object(u.c)(function(e){return{pokemonNames:e.pokemons.pokemonNames,pokemons:e.pokemons.list,selectedCard:e.pokemons.selectedCard,loadingData:e.pokemons.loadingData,searchTerm:e.pokemons.searchTerm,routeMatch:e.pokemons.routeMatch}},j)(A),D=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("div",{className:"bg-upper-decoration"}),o.a.createElement("div",{className:"bg-upper-decoration right"}),o.a.createElement("div",{className:"bg-lower-decoration"}),o.a.createElement("div",{className:"bg-lower-decoration right"}),o.a.createElement("div",{className:"container"},o.a.createElement(d.c,null,o.a.createElement(d.a,{exact:!0,path:"/pokedex/",component:w}),o.a.createElement(d.a,{exact:!0,path:"/pokedex/pokemon/:searchTerm/:id",component:w}))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(47);var I,M=a(7),L=a(17),P=a(32),R=a(22),x=a(16),G=a.n(x),$={pokemonNames:[],list:[],selectedCard:0,searchTerm:"",loadingData:!1,routeMatch:!0},H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E.SELECT_CARD:return G()(e,{selectedCard:{$set:t.payload.pokemonId}});case E.SEARCH:return G()(e,{searchTerm:{$set:t.payload.value}});case E.SET_LIST:return G()(e,{list:{$set:t.payload.list}});case E.SET_NAME_LIST:return G()(e,{pokemonNames:{$set:t.payload.list}});case E.LOADING_DATA:return G()(e,{loadingData:{$set:t.payload.loading}});case E.LOADING_NAMES_DATA:return G()(e,{loadingNamesData:{$set:t.payload.loading}});case E.SET_ROUTE_MATCH:return G()(e,{routeMatch:{$set:t.payload.routeMatch}});default:return e}},J=a(28),U=Object(M.a)(),W=Object(L.d)((I=U,Object(L.c)({router:Object(R.b)(I),pokemons:H})),Object(L.a)(P.a,Object(J.a)(U)));s.a.render(o.a.createElement(u.a,{store:W},o.a.createElement(R.a,{history:U,basename:"/pokedex"},o.a.createElement(D,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[33,1,2]]]);
//# sourceMappingURL=main.1ab14ac1.chunk.js.map